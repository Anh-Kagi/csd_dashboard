{% extends 'format/datatables_format.html' %}

{% load static i18n %}

{% block table_content %}

    <table class="table table-bordered" id="repairTable" width="100%" cellspacing="0">
        <thead>
        <tr>
            <th></th>
            <th>Numéro de lot</th>
            <th>Numéro d'identification</th>
            <th>Modèle produit</th>
            <th>Fabriquant</th>
            <th>Réf. Hardware</th>
            <th>Réf. Software</th>
            <th>Créé le</th>
            <th>Modifié par</th>
            <th>Status</th>
            <th>Date de cloture</th>
        </tr>
        </thead>
        <tbody>

        {% for file in files %}

            <tr>
                <td class="bg-white">
                    {% if perms.change_repair %}
                        <a href="{% url 'reman:edit_repair' pk=file.pk %}" title="Modification dossier" class="btn btn-success btn-circle btn-sm"><i class="fas fa-edit"></i></a>
                    {% else %}
                        <i class="btn btn-dark btn-circle btn-sm fas fa-edit"></i>
                    {% endif %}
                </td>
                <td>{{ file.batch }}</td>
                <td>{{ file.identify_number }}</td>
                <td>{{ file.batch.ecu_ref_base.ecu_type.technical_data }}</td>
                <td>{{ file.batch.ecu_ref_base.ecu_type.supplier_oe }}</td>
                <td>{{ file.batch.ecu_ref_base.ecu_type.hw_reference }}</td>
                <td>{{ file.batch.ecu_model.sw_reference }}</td>
                <td>{{ file.created_at }}</td>
                <td>{{ file.modified_by }}</td>
                <td>{{ file.status }}</td>
                <td>{{ file.closing_date|default:"--" }}</td>
            </tr>

        {% endfor %}

        </tbody>
        <tfoot>
        <tr>
            <th></th>
            <th>Numéro de lot</th>
            <th>Numéro d'identification</th>
            <th>Modèle produit</th>
            <th>Fabriquant</th>
            <th>Réf. Hardware</th>
            <th>Réf. Software</th>
            <th>Créé le</th>
            <th>Modifié par</th>
            <th>Status</th>
            <th>Date de cloture</th>
        </tr>
        </tfoot>
    </table>

{% endblock %}

{% block tablecss %}

    <!-- SearchPanes css -->
    <link rel="stylesheet" type="text/css"
          href="{% static 'vendor/datatables/SearchPanes/css/searchPanes.bootstrap4.min.css' %}"/>
    <link rel="stylesheet" type="text/css"
          href="{% static 'vendor/datatables/Buttons/css/buttons.bootstrap4.min.css' %}"/>
    <link rel="stylesheet" type="text/css"
          href="{% static 'vendor/datatables/Select/css/select.bootstrap4.min.css' %}"/>

{% endblock %}

{% block tablejs %}

    <!-- Page level custom scripts -->
    <script type="text/javascript" src="{% static 'reman/js/reman-tables.js' %}"></script>

    <!-- SearchPanes scripts -->
    <script type="text/javascript"
            src="{% static 'vendor/datatables/SearchPanes/js/dataTables.searchPanes.min.js' %}"></script>
    <script type="text/javascript"
            src="{% static 'vendor/datatables/SearchPanes/js/searchPanes.bootstrap4.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'vendor/datatables/Select/js/dataTables.select.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'vendor/datatables/Buttons/js/dataTables.buttons.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'vendor/datatables/Buttons/js/buttons.bootstrap4.min.js' %}"></script>

{% endblock %}