{% extends 'dashboard/format/datatables_format.html' %}

{% load static %}

{% load i18n %}

{% block table_content %}

    <h3 class="mb-4 mt-3 text-gray-800">Exportation des données CORVET :</h3>

    <form class="form-inline ml-sm-3" method="post" action="{% url 'import_export:export' %}">

        {% csrf_token %}

        <div class="form-group">
            <label for="{{ form.formats.id_for_label }}" class="mb-2">Format :</label>

            {{ form.formats }}

        </div>

        <div class="form-group">
            <label for="{{ form.products.id_for_label }}" class="mb-2">Produit :</label>

            {{ form.products }}

        </div>

        <button type="submit" class="btn btn-success btn-icon-split mb-2">
            <span class="icon text-white-50"><i class="fas fa-file-download"></i></span>
            <span class="text">{% trans "Data Export" %}</span>
        </button>

    </form>

    <hr>

    <h3 class="text-gray-800 mb-4 mt-5">Importation des données REMAN :</h3>

    <form class="form-inline mb-4" method="post" enctype="multipart/form-data">

        {% csrf_token %}

        <div class="input-group col-sm-5">
            <div class="input-group-prepend mb-2">
                <span class="input-group-text">ECU Cross Référence</span>
            </div>
            <div class="custom-file mb-2">
                <input type="file" class="custom-file-input" id="inputMyFile" name="myfile">
                <label class="custom-file-label" for="inputMyFile">Choose file</label>
            </div>
        </div>
        <button type="submit" class="btn btn-success btn-icon-split mb-2 ml-sm-2">
            <span class="icon text-white-50"><i class="fas fa-file-upload"></i></span>
            <span class="text">{% trans "Excel Import" %}</span>
        </button>
    </form>

    <form class="form-inline" method="post" enctype="multipart/form-data">

        {% csrf_token %}

        <div class="input-group col-sm-5">
            <div class="input-group-prepend mb-2">
                <span class="input-group-text">Pièces Détachées</span>
            </div>
            <div class="custom-file mb-2">
                <input type="file" class="custom-file-input" id="inputMyFile" name="myfile">
                <label class="custom-file-label" for="inputMyFile">Choose file</label>
            </div>
        </div>
        <button type="submit" class="btn btn-success btn-icon-split mb-2 ml-sm-2">
            <span class="icon text-white-50"><i class="fas fa-file-upload"></i></span>
            <span class="text">{% trans "Excel Import" %}</span>
        </button>
    </form>

    <hr>

    <table class="table table-bordered" id="ecuModelTable" width="100%" cellspacing="0">
        <thead>
        <tr>
            <th>Référence EMS</th>
            <th>Référence OEM</th>
            <th>Référence OEM Brute</th>
            <th>Hardware</th>
            <th>Software</th>
            <th>Modèle Produit</th>
            <th>Fabriquant</th>
        </tr>
        </thead>
        <tbody>

        {% for ecu in ecus %}

            <tr>
                <td>{{ ecu.es_reference }}</td>
                <td>{{ ecu.oe_reference }}</td>
                <td>{{ ecu.oe_raw_reference }}</td>
                <td>{{ ecu.hw_reference }}</td>
                <td>{{ ecu.sw_reference }}</td>
                <td>{{ ecu.technical_data }}</td>
                <td>{{ ecu.supplier_oe }}</td>
            </tr>

        {% endfor %}

        </tbody>
    </table>

{% endblock %}

{% block tablejs %}

    <!-- Page level custom scripts -->
    <script type="text/javascript" src="{% static 'reman/js/reman-tables.js' %}"></script>

{% endblock %}