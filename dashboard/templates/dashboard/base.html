{% extends 'dashboard/base/_layout.html' %}

{% load i18n %}

{% block basecontent %}

    <!-- Page Wrapper -->
    <div id="wrapper">

        <!-- Sidebar -->
        <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">

            <!-- Sidebar - Brand -->
            <a class="sidebar-brand d-flex align-items-center justify-content-center"
               href="{% url 'dashboard:index' %}">
                <div class="sidebar-brand-icon">
                    <i class="fas fa-cogs"></i>
                </div>
                <div class="sidebar-brand-text mx-3">CSD Board</div>
            </a>

            <!-- Divider -->
            <hr class="sidebar-divider my-0">

            <!-- Nav Item - Dashboard -->
            <li class="nav-item">
                <a class="nav-link" href="{% url 'dashboard:charts' %}">
                    <i class=" fas fa-fw fa-tachometer-alt"></i>
                    <span>{% trans "Dashboard" %}</span></a>
            </li>

            {% if user.is_authenticated is not True %}

                <!-- Divider -->
                <hr class="sidebar-divider">

                <div class="sidebar-heading">
                    Interface
                </div>

                <!-- Nav Item - login -->
                <li class="nav-item">
                    <a class="login-btn nav-link" href="#">
                        <i class="fas fa-fw fa-user"></i>
                        <span>{% trans "Login" %}</span>
                    </a>
                </li>

            {% endif %}

            {% include 'dashboard/base/nav_csd_atelier.html' %}

            {% include 'dashboard/base/nav_csd_admin.html' %}

            {% include 'dashboard/base/nav_tools.html' %}

            <!-- Divider -->
            <hr class="sidebar-divider">

            {% include 'demo/nav_demo.html' %}

            <!-- Sidebar Toggler (Sidebar) -->
            <div class="text-center d-none d-md-inline">
                <button class="rounded-circle border-0" id="sidebarToggle"></button>
            </div>

        </ul>
        <!-- End of Sidebar -->

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="content">

                <div>
                    {% if messages %}
                        {% for message in messages %}
                            <div style="border-radius:0;" {% if message.tags %}
                                 class="alert alert-icon alert-{{ message.tags }} alert-dismissible fade show mb-0"
                                 role="alert" {% endif %}>
                                {{ message }}
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                        {% endfor %}
                    {% endif %}
                </div>

                {% include 'dashboard/base/top_bar.html' %}

                <!-- Begin Page Content -->
                <div class="container-fluid">

                    {% include 'dashboard/base/_header.html' %}

                    {% block content %} {% endblock %}

                </div>
                <!-- /.container-fluid -->
            </div>
            <!-- End of Main Content -->

            <!-- Footer -->
            <footer class="sticky-footer bg-white">
                <div class="container my-auto">
                    <div class="copyright text-center my-auto">
                        <span>Copyright &copy; <a href="https://github.com/Nels885/csd_dashboard" target="_blank">Lionel VOIRIN</a>
                            for Faurecia Clarion Electronic</span>
                    </div>
                </div>
            </footer>
            <!-- End of Footer -->

        </div>
        <!-- End of Content Wrapper -->

    </div>
    <!-- End of Page Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>

    {% include 'dashboard/base/_modal.html' %}

    {% block custommodal %} {% endblock %}

{% endblock %}

{% block extrascripts %}

    <script type="text/javascript">
        $(function () {
            // Log in buttons
            $(".login-btn").modalForm({formURL: "{% url 'dashboard:login' %}"});
            $(".logout-btn").modalForm({formURL: "{% url 'dashboard:logout' %}"});

            $(".tag-xelon-btn").modalForm({formURL: "{% url 'tools:tag-xelon' %}", modalID: "#create-modal"});

            $(".batch-btn").modalForm({formURL: "{% url 'reman:create-batch' %}"});

            $(".corvet-btn").modalForm({formURL: "{% url 'squalaetp:create-corvet' %}", modalID: "#large-modal"});

            // Update post buttons
            $(".update-post").each(function () {
                $(this).modalForm({formURL: $(this).data('id'), modalID: "#large-modal"});
            });

            // log file buttons
            $(".log-btn").each(function () {
                $(this).modalForm({formURL: $(this).data('id'), modalID: "#large-modal"});
            });

            // Delete post buttons
            $(".delete-post").each(function () {
                $(this).modalForm({formURL: $(this).data('id')});
            });

            // Hide message
            $(".alert").fadeTo(5000, 500).slideUp(500, function () {
                $(".alert").slideUp(500);
            });
        })
        ;
    </script>

{% endblock %}